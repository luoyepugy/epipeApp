define(["./module"],function(t){t.directive("submitButton",["httpService","messageService","validateService","$state",function(t,e,n,o){return{restrict:"E",template:'<button class="button button-full button-energized button-round">{{text}}</button>',replace:!0,scope:{action:"@",state:"@",text:"@"},link:function(i,s,u){i.text=u.text;var a,c,l=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,r=/^((145|147)|(15[^4])|(17[6-8])|((13|18)[0-9]))\d{8}$/;s.bind("click",function(){this.closest("form");if(a=n.isEmpty(".j-form .j-input"),1!==a)return e.show(a),!1;if(c=n.submitData(".j-form"),null!==c.email&&void 0!==c.email&&l.test(c.email)===!1)e.show("请输入正确的邮箱格式");else if(null!==c.phone&&void 0!==c.phone&&r.test(c.phone)===!1)e.show("请输入正确的手机号码格式");else if(null!==c.confirmPwd&&void 0!==c.confirmPwd&&c.confirmPwd!==c.password)e.show("两次密码输入不一致");else{var i=t.getData(u.action,c);i.then(function(t){e.show(t.message),o.go(u.state)},function(t){e.show(t)})}})}}}])});