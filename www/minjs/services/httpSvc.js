!function(){"use strict";define(["./module","cordova"],function(o){function e(o,e,t,n,r,i,a,c,s,l,p,u){function h(i,p,u){function h(o){var e=s.alert({title:"<strong>更新<strong>",template:"下载可用的更新",okText:"确定",okType:"button-energized"});e.then(function(e){c.open(o,"_system",f).then(function(o){})["catch"](function(o){n.show("服务器请求失败")})})}var d=o.defer(),g=l.host,f={location:"yes",clearcache:"yes",toolbar:"yes"},m="";return null!=a.localStorage.getItem("token")&&""!==a.localStorage.getItem("token")&&(m=a.localStorage.getItem("token")),t.show({template:"<ion-spinner></ion-spinner><h3>加载中...</h3>",duration:3e3}),e({method:i,url:g+p,data:u,headers:{"x-app-version":"0.0.1","x-access-token":m}}).success(function(o){t.hide(),o.status?d.resolve(o):null!=o.errMsg&&""!==o.errMsg&&n.show(o.errMsg)}).error(function(o,e){t.hide(),401===e?r.go("purchase-login"):403===e?ionic.Platform.isIOS()?h(o.app_ios_path):ionic.Platform.isAndroid()&&h(o.app_andriod_path):n.show("服务器请求失败")}),d.promise}return{getDatas:h}}e.$inject=["$q","$http","$ionicLoading","messageService","$state","$location","$window","$cordovaInAppBrowser","$ionicPopup","config","$cordovaNetwork","$rootScope"],o.factory("httpService",e)})}();