define(["./module"],function(e){e.directive("vcode",["httpService","messageService","$timeout",function(e,n,t){return{restrict:"AE",replace:!0,template:'<button style="width: 125px;" class="mr10 button button-energized" ng-disabled="codeBtn">{{codeBtnVal}}</button>',scope:{},link:function(o,c,u){function i(){0===d?(t(function(){o.codeBtn=!1,o.codeBtnVal="发送验证码"},100),d=60,s=!1):(d--,t(function(){o.codeBtn=!0,o.codeBtnVal=d+"秒后重试",i()},1e3))}function r(){""===o.$parent.user.phone||null==o.$parent.user.phone?n.show("请输入手机号码"):a.test(o.$parent.user.phone)?(s=!0,e.getDatas("POST","/user/sendPhoneToken",{phone:o.$parent.user.phone}).then(function(e){return!0})):n.show("请输入正确的手机号码格式")}var d=60,s=!1,a=/^((145|147)|(15[^4])|(17[6-8])|((13|18)[0-9]))\d{8}$/;o.codeBtnVal="发送验证码",o.codeBtn=!1,c.bind("click",function(){60===d&&(r(),s&&i())})}}}])});